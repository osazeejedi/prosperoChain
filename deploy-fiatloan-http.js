// deploy-fiatloan-http.js - Deploy FiatLoanMatcher contract using HTTP RPC
// This script uses web3.js to connect to the GoQuorum node via HTTP RPC
// Run with: node deploy-fiatloan-http.js

const Web3 = require('web3');
const fs = require('fs');
const path = require('path');

// Configuration
const RPC_URL = 'http://localhost:22000'; // Node 0 HTTP RPC endpoint
const ACCOUNT_ADDRESS = ''; // Will be populated from the node
const ACCOUNT_PASSWORD = ''; // Empty password as per your setup

// Contract bytecode (provided by the user)
const contractBytecode = "0x6080604052348015600e575f5ffd5b506115b88061001c5f395ff3fe608060405234801561000f575f5ffd5b5060043610610060575f3560e01c806334d9289e1461006457806366877b8d14610082578063846b909a146100b2578063a2141160146100ce578063c701c994146100ea578063e1ec3c6814610106575b5f5ffd5b61006c61013e565b6040516100799190610a6e565b60405180910390f35b61009c60048036038101906100979190610ac2565b610143565b6040516100a99190610ce0565b60405180910390f35b6100cc60048036038101906100c79190610ac2565b610314565b005b6100e860048036038101906100e39190610e2c565b6104e5565b005b61010460048036038101906100ff9190610ac2565b61072f565b005b61012060048036038101906101159190610ac2565b6108ba565b60405161013599989796959493929190610f12565b60405180910390f35b5f5481565b61014b6109d4565b60015f8381526020019081526020015f20604051806101200160405290815f8201548152602001600182015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600282015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200160038201805461022b90610fd1565b80601f016020809104026020016040519081016040528092919081815260200182805461025790610fd1565b80156102a25780601f10610279576101008083540402835291602001916102a2565b820191905f5260205f20905b81548152906001019060200180831161028557829003601f168201915b5050505050815260200160048201548152602001600582015481526020016006820154815260200160078201548152602001600882015f9054906101000a900460ff1660028111156102f7576102f6610bab565b5b600281111561030957610308610bab565b5b815250509050919050565b5f60015f8381526020019081526020015f2090505f600281111561033b5761033a610bab565b5b816008015f9054906101000a900460ff16600281111561035e5761035d610bab565b5b1461039e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103959061104b565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff16816001015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff160361042f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610426906110d9565b60405180910390fd5b33816002015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506001816008015f6101000a81548160ff0219169083600281111561049857610497610bab565b5b02179055503373ffffffffffffffffffffffffffffffffffffffff16827f15feab5d3eb17171632762cf769709a315dd15f487a556c0dfb8a259c8f186cc60405160405180910390a35050565b5f8311610527576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161051e90611141565b60405180910390fd5b5f5f8154809291906105389061118c565b91905055506040518061012001604052805f5481526020013373ffffffffffffffffffffffffffffffffffffffff1681526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020018581526020018481526020018381526020018281526020014281526020015f60028111156105b9576105b8610bab565b5b81525060015f5f5481526020019081526020015f205f820151815f01556020820151816001015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506040820151816002015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060608201518160030190816106779190611373565b506080820151816004015560a0820151816005015560c0820151816006015560e08201518160070155610100820151816008015f6101000a81548160ff021916908360028111156106cb576106ca610bab565b5b02179055509050503373ffffffffffffffffffffffffffffffffffffffff165f547f3850bfdb966d58f3352e99432e9dc1a34a467c611a0f46e90b76271e213a94e1868686866040516107219493929190611442565b60405180910390a350505050565b8060015f8281526020019081526020015f206001015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146107d1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107c8906114d6565b60405180910390fd5b5f60015f8481526020019081526020015f209050600160028111156107f9576107f8610bab565b5b816008015f9054906101000a900460ff16600281111561081c5761081b610bab565b5b1461085c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161085390611564565b60405180910390fd5b6002816008015f6101000a81548160ff0219169083600281111561088357610882610bab565b5b0217905550827f9a7851747cd7ffb3fe0a32caf3da48b31f27cebe131267051640f8b72fc4718660405160405180910390a2505050565b6001602052805f5260405f205f91509050805f015490806001015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690806002015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff169080600301805461092990610fd1565b80601f016020809104026020016040519081016040528092919081815260200182805461095590610fd1565b80156109a05780601f10610977576101008083540402835291602001916109a0565b820191905f5260205f20905b81548152906001019060200180831161098357829003601f168201915b505050505090806004015490806005015490806006015490806007015490806008015f9054906101000a900460ff16905089565b6040518061012001604052805f81526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020015f73ffffffffffffffffffffffffffffffffffffffff168152602001606081526020015f81526020015f81526020015f81526020015f81526020015f6002811115610a5057610a4f610bab565b5b81525090565b5f819050919050565b610a6881610a56565b82525050565b5f602082019050610a815f830184610a5f565b92915050565b5f604051905090565b5f5ffd5b5f5ffd5b610aa181610a56565b8114610aab575f5ffd5b50565b5f81359050610abc81610a98565b92915050565b5f60208284031215610ad757610ad6610a90565b5b5f610ae484828501610aae565b91505092915050565b610af681610a56565b82525050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610b2582610afc565b9050919050565b610b3581610b1b565b82525050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f610b7d82610b3b565b610b878185610b45565b9350610b97818560208601610b55565b610ba081610b63565b840191505092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602160045260245ffd5b60038110610be957610be8610bab565b5b50565b5f819050610bf982610bd8565b919050565b5f610c0882610bec565b9050919050565b610c1881610bfe565b82525050565b5f61012083015f830151610c345f860182610aed565b506020830151610c476020860182610b2c565b506040830151610c5a6040860182610b2c565b5060608301518482036060860152610c728282610b73565b9150506080830151610c876080860182610aed565b5060a0830151610c9a60a0860182610aed565b5060c0830151610cad60c0860182610aed565b5060e0830151610cc060e0860182610aed565b50610100830151610cd5610100860182610c0f565b508091505092915050565b5f6020820190508181035f830152610cf88184610c1e565b905092915050565b5f5ffd5b5f5ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b610d3e82610b63565b810181811067ffffffffffffffff82111715610d5d57610d5c610d08565b5b80604052505050565b5f610d6f610a87565b9050610d7b8282610d35565b919050565b5f67ffffffffffffffff821115610d9a57610d99610d08565b5b610da382610b63565b9050602081019050919050565b828183375f83830152505050565b5f610dd0610dcb84610d80565b610d66565b905082815260208101848484011115610dec57610deb610d04565b5b610df7848285610db0565b509392505050565b5f82601f830112610e1357610e12610d00565b5b8135610e23848260208601610dbe565b91505092915050565b5f5f5f5f60808587031215610e4457610e43610a90565b5b5f85013567ffffffffffffffff811115610e6157610e60610a94565b5b610e6d87828801610dff565b9450506020610e7e87828801610aae565b9350506040610e8f87828801610aae565b9250506060610ea087828801610aae565b91505092959194509250565b610eb581610b1b565b82525050565b5f82825260208201905092915050565b5f610ed582610b3b565b610edf8185610ebb565b9350610eef818560208601610b55565b610ef881610b63565b840191505092915050565b610f0c81610bfe565b82525050565b5f61012082019050610f265f83018c610a5f565b610f33602083018b610eac565b610f40604083018a610eac565b8181036060830152610f528189610ecb565b9050610f616080830188610a5f565b610f6e60a0830187610a5f565b610f7b60c0830186610a5f565b610f8860e0830185610a5f565b610f96610100830184610f03565b9a9950505050505050505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f6002820490506001821680610fe857607f821691505b602082108103610ffb57610ffa610fa4565b5b50919050565b7f4c6f616e20616c72656164792066756e646564
